<div class="card m-3">
  <h5 class="card-header">Create New Store</h5>
  <div class="card-body">
    <form [formGroup]="createStoreForm" (ngSubmit)="OnSaveStore()">
      <div class="form-row">
        <div class="form-group col-8">
          <mat-form-field>
            <input
              type="text"
              matInput
              formControlName="name"
              class="form-control"
              placeholder="Enter Store Name"
              [ngClass]="{
                'is-valid': submitted && createStoreForm.get('name').invalid
              }"
            />
          </mat-form-field>
          <mat-error *ngIf="submitted && createStoreForm.get('name').invalid"
            >Store Name is required</mat-error
          >
        </div>

        <div class="form-group col-8">
          
          <!-- <mat-form-field>
            <input
              type="text"
              matInput
              formControlName="location"
              class="form-control"
              placeholder="Enter Store Location"
              [ngClass]="{
                'is-valid': submitted && createStoreForm.get('location').invalid
              }"
            />
          </mat-form-field>
          <mat-error
            *ngIf="submitted && createStoreForm.get('location').invalid"
            >Store Location is required</mat-error
          > -->

          <button mat-button type="button" (click)="onGetLocationBtnClicked()">Add Store Location</button>
        </div>
        <div class="form-group col-8">
          <mat-form-field>
            <input
              type="number"
              matInput
              formControlName="latitude"
              class="form-control"
              placeholder="Enter Store latitude"
              [(ngModel)]="locationData.latitude"
            />
          </mat-form-field>
        </div>
        <div class="form-group col-8">
          <mat-form-field>
            <input
              type="number"
              matInput
              formControlName="longitude"
              class="form-control"
              placeholder="Enter Store longitude"
              [(ngModel)]="locationData.longitude"
            />
          </mat-form-field>
        </div>

        <div class="form-group col-8">
          <button mat-stroked-button (click)="filePicker.click()" type="button">
            Pick Logo
          </button>

          <input type="file" #filePicker (change)="onImagePicked($event)" />
        </div>
        <div
          class="image-preview form-group col-8"
          *ngIf="
            imagePreview !== '' &&
            imagePreview &&
            createStoreForm.get('logo').valid
          "
        >
          <img [src]="imagePreview" [alt]="createStoreForm.value.name" />
        </div>

        <div class="form-group col-8">
          <mat-form-field>
            <mat-label>Choose Category</mat-label>
            <mat-select
              formControlName="catId"
              [ngClass]="{
                'is-valid': submitted && createStoreForm.get('catId').invalid
              }"
            >
              <mat-option *ngFor="let cat of categories" [value]="cat._id">
                {{ cat.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <mat-error *ngIf="submitted && createStoreForm.get('catId').invalid"
            >Store Cat is required</mat-error
          >
        </div>

        <div class="form-group col-8 text-center">
          <button class="btn btn-primary mr-1">Save Store</button>
          <button class="btn btn-warning mr-1" type="reset" (click)="onReset()">
            Cancel
          </button>
        </div>
      </div>
    </form>
  </div>
</div>